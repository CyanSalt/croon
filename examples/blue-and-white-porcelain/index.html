<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CroonJS</title>
</head>
<body>
  <button id="play">Play!</button>
  <script type="module">
    import { play } from 'https://unpkg.com/croonjs'
    let controller
    const scores = [
      `
1=C 4/4 !52
0 0 0_. 5++__ 5++__ 3++__ 2++__ 3++__ | 2++__ 1++__ 6+ 2++__ 3++__ 2++__ 1++__ 5+ 2++__ 3++__ | 2++__ 1++__ 6+_ 1++__ 2++_ 6+__ 3++ 1+__ 2+__ 3+__ 5+__ | 5+__ 3+__ 3+_ 2+_ 1+_ 2+__ 1+__ 6_ 1+__ 2+__ 3+_ |
5+ 6__ 7__ 2+__ 4+__ 5+ ^5+__ 2+__ 1+__ 6__ ||: 1+_ 1+__ 6__ 1+_ 1+__ 6__ 1+__ 6__ 5_ ^5__ 2+__ 1+__ 6__ | 1+_ 1+__ 6__ 1+_ 1+__ 3+__ 2+__ 1+__ 1+_ ^1+__ 5__ 6__ 3+__ | 3+_ 3+__ 2+__ 3+_ 3+__ 2+__ 3+__ 5+_ 3+__ ^3+__ 3+__ 3+__ 3+__ |
2+__ 2+__ 2+__ 2+__ 2+_ 1+__ 3+__ ^3+__ 2+_. 0__ 2+__ 1+__ 6__ | 1+_ 1+__ 6__ 1+_ 1+__ 6__ 1+__ 6__ 5_ ^5__ 5__ 6__ 3+__ | 5+_ 5+__ 3+__ 5+_ 5+__ 3+__ 2+__ 1+__ 1+_ ^1+__ 2+__ 1+__ 2+__ | 3+__ 2+__ 2+__ 1+__ 2+_ 1+__ 6__ 2+__ 1+__ 1+__ 6__ 1+_ 1+_ |
1+ 5__ 1+__ 2+__ 3+__ 4+_ 3+_ ^3+__ 5+__ 5+__ 3+__ | 2+__ 3+__ 6_ 2+__ 3+__ 5+__ 3+__ 2+ ^2+__ 5+__ 5+__ 3+__ | 2+__ 3+__ 5_ 2+__ 3+__ 5+__ 2+__ 1+ ^1+__ 1+__ 2+__ 3+__ | 5+__ 6+__ 5+__ 3+__ 5+__ 3+__ 3+__ 2+__ 2+ ^ 2+__ 1+__ 2+__ 1+__ |
2+_ 1+__ 2+__ ^2+__ 3+_. 5+_ 3+_ ^3+__ 5+__ 5+__ 3+__ | 2+__ 3+__ 6_ 2+__ 3+__ 5+__ 3+__ 2+ ^2+__ 5+__ 5+__ 3+__ | 2+__ 3+__ 5_ 2+__ 3+__ 5+__ 2+__ 1+ ^1+__ 1+__ 2+__ 3+__ | 5+__ 6+__ 5+__ 3+__ 5+__ 3+__ 3+__ 2+__ 2+_. 5__ 3+_ 2+__ 2+__ |
[1. ^2+__ 1+_. 0 3 0_ 3++__ 5++__ | 6++. 5++__ 3++__ 2++. 1++__ 2++__ | 5++. 5++__ 2++__ 1++. 1++__ 2++__ | 3++_ 2++_ 1++_ 6+_ 1++_ 2++_ 3++_ 6++_ |
5++. 3+__ 5+__ 6+__ 3+__ 5+__ 2+__ 3+__ 2+__ 1+__ 6__ :||
^2+__ 1+_ 1+__ ^1+ 3 - | 2+__ 3+__ 2+__ 3+__ 5+__ 3+__ 5+__ 3+__ 2+_ 2+__ 3+__ 6_ 5_ |
2+__ 3+__ 2+__ 3+__ 5+__ 3+__ 5+__ 3+__ 2+_ 2+__ 3+__ 6_ 5_ | 2+__ 3+__ 2+__ 3+__ 5+__ 3+__ 5+__ 3+__ 2+_ 2+__ 3+__ 6_ 5_ | 2+__ 3+__ 2+__ 3+__ 5+__ 3+__ 5+__ 3+__ 2+. 2+_ | 3+ - - - ||
      `,
      `
1=C 4/4 !52
0 0 0 0 | 4-__ 1__ 4__ 5__ 6 3-__ 1__ 3__ 5__ 1+ | 2-__ 6-__ 2__ 4__ 6 1-__ 5-__ 1__ 2__ 3_ 5_ | 6--__ 3-__ 6-__ 1__ 3_ 6_ #4--__ 2-__ #4-__ 6-__ 2_ 4-_ |
5-__ 2__ 4__ 5__ 0 0 0 ||: 1-__ 5-__ 2__ 3__ 5 1-__ 5-__ 1__ 2__ 3_ 7--_ | 6--__ 3-__ 7-__ 1__ 3 6--__ 3-__ 7-__ 1__ 3_ 5--_ | 4--__ 1-__ 4-__ 6-__ 1 4--__ 1-__ 4-__ 6-__ 1 |
5--__ 2-__ 4-__ 5-__ 7- 5--__ 2-__ 4-__ 5-__ 7- | 1-__ 5-__ 2__ 3__ 5 1-__ 5-__ 1__ 2__ 3_ 1-_ | 3--__ 3-__ 5-__ 7-__ 3 6--__ 3-__ 7-__ 1__ 3_ 5--_ | 4--__ 1-__ 4-__ 5-__ 6-_ 1_ 5--__ 2-__ 4-__ 5-__ 7- |
1-__ 5-__ 2__ 3__ 0 1-__ 5-__ #6-__ 5-__ 1-_ 1--_ | 4--__ 1-__ 4-__ 5-__ 6-_ 1_ 4--__ 2-__ 5-__ 7-__ 2 | 3--__ 7--__ 3-__ 5-__ 7-_ 2_ 6--__ 3-__ 6-__ 7-__ 1_ 3_ | 4--__ 1-__ 4-__ 5-__ 6-_ 1_ 5--__ 2-__ 5-__ 6-__ 7-_ 2_ |
1-__ 5-__ 1__ 2__ 3_ 5_ 1-__ 5-__ #6-__ 1__ 3_ 1-_ | 4--__ 1-__ 4-__ 5-__ 6-_ 1_ 5--__ 2-__ 4-__ 5-__ 7-_ 2_ | 3--__ 7--__ 3-__ 5-__ 7-_ 3_ 6--__ 3-__ 6-__ 7-__ 1_ 3_ | 4--__ 1-__ 4-__ 5-__ 6-_ 1_ 5--__ 2-__ 4-__ 5-__ 7- |
[1. 1-__ 5-__ 1__ 4__ ^4__ 5-__ 1__ 4__ 1- 0 | 4-__ 1__ 4__ 5__ 6_ 1+_ 4-__ 2__ 4__ #5__ 1+ | 3-__ 7-__ 2__ 3__ 5_ 7_ #2-__ 1__ #2__ #4__ 1+ | 2-__ 6-__ 1__ 2__ 4 #4-__ 2__ #4__ 6__ 1+_ 3+_ |
5-__ 2__ 4__ 5__ 7__ 2+__ 0_ 5- 5-- :||
||: 1-__ 5-__ 2__ 3__ 5 1-__ 5-__ 1__ 2__ 3_ 7--_ | 6--__ 3-__ 7-__ 1__ 3 6--__ 3-__ 7-__ 1__ 3_ 5--_ | 4--__ 1-__ 4-__ 6-__ 1 4--__ 1-__ 4-__ 6-__ 1 |
5--__ 2-__ 4-__ 5-__ 7- 5--__ 2-__ 4-__ 5-__ 7- | 1-__ 5-__ 2__ 3__ 5 1-__ 5-__ 1__ 2__ 3_ 1-_ | 3--__ 3-__ 5-__ 7-__ 3 6--__ 3-__ 7-__ 1__ 3_ 5--_ | 4--__ 1-__ 4-__ 5-__ 6-_ 1_ 5--__ 2-__ 4-__ 5-__ 7- |
1-__ 5-__ 2__ 3__ 0 1-__ 5-__ #6-__ 5-__ 1-_ 1--_ | 4--__ 1-__ 4-__ 5-__ 6-_ 1_ 4--__ 2-__ 5-__ 7-__ 2 | 3--__ 7--__ 3-__ 5-__ 7-_ 2_ 6--__ 3-__ 6-__ 7-__ 1_ 3_ | 4--__ 1-__ 4-__ 5-__ 6-_ 1_ 5--__ 2-__ 5-__ 6-__ 7-_ 2_ |
1-__ 5-__ 1__ 2__ 3_ 5_ 1-__ 5-__ #6-__ 1__ 3_ 1-_ | 4--__ 1-__ 4-__ 5-__ 6-_ 1_ 5--__ 2-__ 4-__ 5-__ 7-_ 2_ | 3--__ 7--__ 3-__ 5-__ 7-_ 3_ 6--__ 3-__ 6-__ 7-__ 1_ 3_ :||
4--__ 1-__ 4-__ 5-__ 6-_ 1_ 5--__ 2-__ 4-__ 5-__ 7- | 1-__ 5-__ 1__ 4__ ^4__ 5-__ 1__ 4__ 1- - | 4-__ 1-__ 4__ 5__ 6_ 1+_ 4-__ 1__ 4__ 5__ ^5 |
3-__ 1__ 3__ 5__ 1+ 3-__ 1__ 3__ 5__ ^5 | 2-__ 6-__ 3__ 4__ 6 2-__ 6-__ 3__ 4__ ^4 | 5-__ 2__ 4__ 5__ 7 5-__ 2__ 4__ 5__ 7 | 1 - - - ||
      `,
    ]
    async function loop() {
      controller = new AbortController()
      const context = new AudioContext()
      await Promise.all(
        scores.map(score => play(score, {
          context,
          signal: controller.signal,
          waveform: 'square',
          gain: 0.1,
        }))
      )
      return loop()
    }
    document.getElementById('play').addEventListener('click', () => {
      if (controller) {
        controller.abort()
        controller = undefined
      } else {
        loop().catch(() => {})
      }
    })
  </script>
</body>
</html>
